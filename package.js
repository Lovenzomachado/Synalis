const TRANSLATIONS = {
  pt: {
    meta_title: "Synalis — Tecnologia & Inovação",
    tagline: "Tecnologia & Inovação",
    nav_home: "Início",
    nav_about: "Sobre",
    nav_value: "Proposta de Valor",
    nav_contact: "Contato",
    cta_contact: "Fale conosco",
    aria_open_menu: "Abrir menu",

    hero_badge: "Inteligência urbana aplicada",
    hero_title:
      "Inteligência que Move, Conecta e Ilumina as Cidades do Amanhã.",
    hero_desc:
      "Unimos engenharia digital, automação e IA para transformar infraestrutura em valor real — com eficiência, impacto social e sustentabilidade.",
    btn_learn_more: "Saiba Mais",
    btn_view_value: "Ver Proposta de Valor",
    feature_ai: "Automação & IA",
    feature_mobility: "Mobilidade",
    feature_sustainability: "Sustentabilidade",

    trust_tag: "Confiável para governos e empresas",
    results_title: "Resultados que importam",
    results_desc:
      "Reduzimos custos, melhoramos a eficiência operacional e potencializamos decisões com dados e IA. Projetos sob medida, sustentáveis e escaláveis.",
    label_realtime: "Tempo real",
    benefit_insights: "Insights acionáveis",
    label_scale: "Escala",
    benefit_modular: "Arquitetura modular",
    label_sustainable: "Sustentável",
    benefit_impact: "Menos impacto, mais valor",
    benefit_roi: "Eficiência mensurável",
    btn_start_convo: "Iniciar conversa",

    about_badge: "Sobre a Synalis",
    about_title: "Quem somos",
    about_p1:
      "O mundo urbano muda em ritmo acelerado. Mobilidade, sustentabilidade e inteligência de dados deixaram de ser tendências — agora são fundamentos do progresso. Nesse cenário, a Synalis surge com um propósito claro: transformar sinais, informações e infraestruturas em inteligência viva que impulsiona o futuro das cidades.",
    about_p2:
      "Combinamos tecnologia de ponta, automação e inteligência artificial a uma visão estratégica de engenharia digital para criar soluções que reduzem custos, aumentam a eficiência e geram impacto social.",
    about_p3:
      "Nosso diferencial está na forma de pensar: aplicamos princípios de engenharia integrada e comunicação estratégica para alinhar tecnologia e propósito. Cada projeto nasce da escuta atenta das necessidades do cliente e se expande com inovação prática, sustentável e escalável.",
    about_p4:
      "Investir ou implementar com a Synalis é participar de uma rede inteligente que conecta empresas, governos e pessoas em torno de um mesmo objetivo: construir cidades mais seguras, humanas e economicamente fortes.",
    about_p5: "Synalis — inteligência que move cidades e cria oportunidades.",
    about_note:
      "Entre em contato e descubra como transformar tecnologia em valor real para sua empresa, seu município e para o futuro das cidades.",
    about_chip: "Engenharia Digital & IA",
    about_chip_desc:
      "Arquiteturas escaláveis, dados em tempo real e automação para decisões mais rápidas e precisas.",

    value_title: "Proposta de Valor",
    value_desc:
      "Soluções focadas em mobilidade, automação e sustentabilidade, com impacto mensurável e escalabilidade.",
    btn_partnerships: "Parcerias & Projetos",

    card1_title: "Mobilidade inteligente",
    card1_desc:
      "Soluções que conectam veículos, pessoas e cidades, gerando fluidez e segurança.",
    card2_title: "Automação & IA",
    card2_desc:
      "Inteligência em tempo real para decisões rápidas, precisas e com menor custo.",
    card3_title: "Cidades humanas",
    card3_desc:
      "Tecnologia a serviço da sustentabilidade e da qualidade de vida.",
    card4_title: "Escalabilidade",
    card4_desc: "Arquiteturas que se adaptam a diferentes realidades urbanas.",

    contact_badge: "Contato",
    contact_title: "Vamos conversar",
    contact_desc:
      "Fale com a Synalis para parcerias, projetos e implementações.",
    label_email: "E-mail",
    label_address: "Endereço",
    btn_see_solutions: "Ver soluções",
    btn_official_site: "Site oficial",

    cta_badge: "Inteligência que move cidades",
    cta_final_title:
      "Mais do que tecnologia — construímos cidades seguras, humanas e eficientes.",
    cta_final_contact: "Fale com a Synalis",
    cta_final_learn: "Saber mais",

    footer_text:
      "Mais do que apenas tecnologia. Criamos inteligência que move cidades, transforma a vida urbana e abre caminho para um futuro mais conectado e sustentável.",
    footer_rights:
      "© 2025 Synalis — Tecnologia & Inovação. Todos os direitos reservados.",

    wa_prefill: "Olá! Vi seu site e quero fazer negócios. Vamos Conversar?!",
    html_lang: "pt-BR",
  },
  en: {
    meta_title: "Synalis — Technology & Innovation",
    tagline: "Technology & Innovation",
    nav_home: "Home",
    nav_about: "About",
    nav_value: "Value Proposition",
    nav_contact: "Contact",
    cta_contact: "Contact us",
    aria_open_menu: "Open menu",

    hero_badge: "Applied urban intelligence",
    hero_title:
      "Intelligence that moves, connects, and illuminates the cities of tomorrow.",
    hero_desc:
      "We unite digital engineering, automation, and AI to turn infrastructure into real value — with efficiency, social impact, and sustainability.",
    btn_learn_more: "Learn more",
    btn_view_value: "View value proposition",
    feature_ai: "Automation & AI",
    feature_mobility: "Mobility",
    feature_sustainability: "Sustainability",

    trust_tag: "Trusted by governments and enterprises",
    results_title: "Results that matter",
    results_desc:
      "We cut costs, boost operational efficiency, and empower decisions with data and AI. Tailor-made, sustainable, and scalable projects.",
    label_realtime: "Real-time",
    benefit_insights: "Actionable insights",
    label_scale: "Scale",
    benefit_modular: "Modular architecture",
    label_sustainable: "Sustainable",
    benefit_impact: "Less impact, more value",
    benefit_roi: "Measurable efficiency",
    btn_start_convo: "Start a conversation",

    about_badge: "About Synalis",
    about_title: "Who we are",
    about_p1:
      "The urban world is changing fast. Mobility, sustainability, and data intelligence are no longer trends — they are foundations of progress. In this context, Synalis emerges with a clear purpose: to transform signals, information, and infrastructure into living intelligence that powers the future of cities.",
    about_p2:
      "We combine cutting-edge technology, automation, and artificial intelligence with a strategic vision of digital engineering to create solutions that reduce costs, increase efficiency, and generate social impact.",
    about_p3:
      "Our edge is how we think: we apply principles of integrated engineering and strategic communication to align technology with purpose. Every project starts by listening closely to client needs and evolves with practical, sustainable, and scalable innovation.",
    about_p4:
      "Investing or implementing with Synalis means joining an intelligent network that connects companies, governments, and people around a single goal: building safer, more human, and economically strong cities.",
    about_p5: "Synalis — intelligence that moves cities and creates opportunities.",
    about_note:
      "Get in touch to turn technology into real value for your company, your city, and the future of urban life.",
    about_chip: "Digital Engineering & AI",
    about_chip_desc:
      "Scalable architectures, real-time data, and automation for faster, more precise decisions.",

    value_title: "Value Proposition",
    value_desc:
      "Solutions focused on mobility, automation, and sustainability, with measurable impact and scalability.",
    btn_partnerships: "Partnerships & Projects",

    card1_title: "Smart mobility",
    card1_desc:
      "Solutions that connect vehicles, people, and cities, creating flow and safety.",
    card2_title: "Automation & AI",
    card2_desc:
      "Real-time intelligence for faster, more accurate, lower-cost decisions.",
    card3_title: "Human-centered cities",
    card3_desc: "Technology in service of sustainability and quality of life.",
    card4_title: "Scalability",
    card4_desc: "Architectures that adapt to different urban realities.",

    contact_badge: "Contact",
    contact_title: "Let's talk",
    contact_desc:
      "Talk to Synalis about partnerships, projects, and implementations.",
    label_email: "Email",
    label_address: "Address",
    btn_see_solutions: "See solutions",
    btn_official_site: "Official site",

    cta_badge: "Intelligence that moves cities",
    cta_final_title:
      "More than technology — we build safer, more human and efficient cities.",
    cta_final_contact: "Contact Synalis",
    cta_final_learn: "Learn more",

    footer_text:
      "More than just technology. We create intelligence that moves cities, transforms urban life, and paves the way to a more connected and sustainable future.",
    footer_rights:
      "© 2025 Synalis — Technology & Innovation. All rights reserved.",

    wa_prefill:
      "Hi! I saw your site and would like to discuss business. Shall we talk?",
    html_lang: "en",
  },
  es: {
    meta_title: "Synalis — Tecnología e Innovación",
    tagline: "Tecnología e Innovación",
    nav_home: "Inicio",
    nav_about: "Sobre",
    nav_value: "Propuesta de Valor",
    nav_contact: "Contacto",
    cta_contact: "Hable com nós",
    aria_open_menu: "Abrir menú",

    hero_badge: "Inteligencia urbana aplicada",
    hero_title:
      "Inteligencia que mueve, conecta e ilumina las ciudades del mañana.",
    hero_desc:
      "Unimos ingeniería digital, automatización e IA para convertir la infraestructura en valor real, con eficiencia, impacto social y sostenibilidad.",
    btn_learn_more: "Saber más",
    btn_view_value: "Ver propuesta de valor",
    feature_ai: "Automatización e IA",
    feature_mobility: "Movilidad",
    feature_sustainability: "Sostenibilidad",

    trust_tag: "Confiable para gobiernos y empresas",
    results_title: "Resultados que importan",
    results_desc:
      "Reducimos costos, mejoramos la eficiencia operativa y potenciamos decisiones con datos e IA. Proyectos a medida, sostenibles y escalables.",
    label_realtime: "Tiempo real",
    benefit_insights: "Información accionable",
    label_scale: "Escala",
    benefit_modular: "Arquitectura modular",
    label_sustainable: "Sostenible",
    benefit_impact: "Menos impacto, más valor",
    benefit_roi: "Eficiencia medible",
    btn_start_convo: "Iniciar conversación",

    about_badge: "Sobre Synalis",
    about_title: "Quiénes somos",
    about_p1:
      "El mundo urbano cambia a gran velocidad. Movilidad, sostenibilidad e inteligencia de datos ya no son tendencias: son fundamentos del progreso. En este contexto, Synalis surge con un propósito claro: transformar señales, información e infraestructuras en inteligencia viva que impulsa el futuro de las ciudades.",
    about_p2:
      "Combinamos tecnología de punta, automatización e inteligencia artificial con una visión estratégica de ingeniería digital para crear soluciones que reducen costos, aumentan la eficiencia y generan impacto social.",
    about_p3:
      "Nuestra diferencia está en cómo pensamos: aplicamos principios de ingeniería integrada y comunicación estratégica para alinear tecnología y propósito. Cada proyecto nace de escuchar atentamente las necesidades del cliente y se expande con innovación práctica, sostenible y escalable.",
    about_p4:
      "Invertir o implementar con Synalis es formar parte de una red inteligente que conecta empresas, gobiernos y personas con un objetivo común: construir ciudades más seguras, humanas y económicamente fuertes.",
    about_p5: "Synalis — inteligencia que mueve ciudades y crea oportunidades.",
    about_note:
      "Ponte en contacto y descubre cómo convertir la tecnología en valor real para tu empresa, tu municipio y el futuro de las ciudades.",
    about_chip: "Ingeniería Digital e IA",
    about_chip_desc:
      "Arquitecturas escalables, datos en tiempo real y automatización para decisiones más rápidas y precisas.",

    value_title: "Propuesta de Valor",
    value_desc:
      "Soluciones enfocadas en movilidad, automatización y sostenibilidad, con impacto medible y escalabilidad.",
    btn_partnerships: "Alianzas y Proyectos",

    card1_title: "Movilidad inteligente",
    card1_desc:
      "Soluciones que conectan vehículos, personas y ciudades, generando fluidez y seguridad.",
    card2_title: "Automatización e IA",
    card2_desc:
      "Inteligencia en tiempo real para decisiones rápidas, precisas y de menor costo.",
    card3_title: "Ciudades humanas",
    card3_desc:
      "Tecnología al servicio de la sostenibilidad y la calidad de vida.",
    card4_title: "Escalabilidad",
    card4_desc: "Arquitecturas que se adaptan a diferentes realidades urbanas.",

    contact_badge: "Contacto",
    contact_title: "Hablemos",
    contact_desc:
      "Habla con Synalis para alianzas, proyectos e implementaciones.",
    label_email: "Correo electrónico",
    label_address: "Dirección",
    btn_see_solutions: "Ver soluciones",
    btn_official_site: "Sitio oficial",

    cta_badge: "Inteligencia que mueve ciudades",
    cta_final_title:
      "Más que tecnología: construimos ciudades seguras, humanas y eficientes.",
    cta_final_contact: "Habla con Synalis",
    cta_final_learn: "Saber más",

    footer_text:
      "Más que solo tecnología. Creamos inteligencia que mueve ciudades, transforma la vida urbana y abre camino hacia un futuro más conectado y sostenible.",
    footer_rights:
      "© 2025 Synalis — Tecnología e Innovación. Todos los derechos reservados.",

    wa_prefill:
      "¡Hola! Vi su sitio y me gustaría hablar de negocios. ¿Hablamos?",
    html_lang: "es",
  },
  zh: {
    meta_title: "Synalis — 科技与创新",
    tagline: "科技与创新",
    nav_home: "首页",
    nav_about: "关于",
    nav_value: "价值主张",
    nav_contact: "联系方式",
    cta_contact: "联系我们",
    aria_open_menu: "打开菜单",

    hero_badge: "应用型城市智能",
    hero_title: "以智能驱动、连接并点亮未来之城。",
    hero_desc:
      "融合数字工程、自动化与人工智能，将基础设施转化为真实价值——高效、具社会影响且可持续。",
    btn_learn_more: "了解更多",
    btn_view_value: "查看价值主张",
    feature_ai: "自动化与人工智能",
    feature_mobility: "出行",
    feature_sustainability: "可持续发展",

    trust_tag: "政府与企业信赖",
    results_title: "关键成果",
    results_desc:
      "以数据与AI降低成本、提升运营效率、加速决策。项目量身定制、可持续、可扩展。",
    label_realtime: "实时",
    benefit_insights: "可执行洞察",
    label_scale: "规模",
    benefit_modular: "模块化架构",
    label_sustainable: "可持续",
    benefit_impact: "更小影响，更大价值",
    benefit_roi: "可量化效率",
    btn_start_convo: "开始交流",

    about_badge: "关于 Synalis",
    about_title: "我们是谁",
    about_p1:
      "城市世界正在加速变革。出行、可持续性与数据智能不再是趋势，而是进步的基石。在此背景下，Synalis 以明确使命而生：将信号、信息与基础设施转化为推动城市未来的“活”智能。",
    about_p2:
      "我们将前沿技术、自动化与人工智能，与数字工程的战略视角相结合，打造降本增效、创造社会价值的解决方案。",
    about_p3:
      "我们的优势在于思维方式：以一体化工程与战略沟通为原则，使技术与目标同频。每个项目从倾听需求出发，以务实、可持续、可扩展的创新不断进化。",
    about_p4:
      "与 Synalis 投资或实施，意味着加入一张连接企业、政府与公众的智慧网络，共同建设更安全、更以人为本且更具活力的城市。",
    about_p5: "Synalis——让城市运转、创造机会的智能。",
    about_note: "联系我们，把技术转化为对企业、城市与未来的真实价值。",
    about_chip: "数字工程与人工智能",
    about_chip_desc: "可扩展架构、实时数据与自动化，助力更快速、更精准的决策。",

    value_title: "价值主张",
    value_desc: "聚焦出行、自动化与可持续性的解决方案，强调可度量影响与可扩展性。",
    btn_partnerships: "合作与项目",

    card1_title: "智慧出行",
    card1_desc: "联通车辆、人群与城市，提升通行效率与安全性。",
    card2_title: "自动化与人工智能",
    card2_desc: "实时智能，支持更快、更准、更省的决策。",
    card3_title: "以人为本的城市",
    card3_desc: "让技术服务于可持续与生活品质。",
    card4_title: "可扩展性",
    card4_desc: "适配不同城市场景的架构。",

    contact_badge: "联系方式",
    contact_title: "一起交流",
    contact_desc: "就合作、项目与落地实施，与 Synalis 取得联系。",
    label_email: "电子邮件",
    label_address: "地址",
    btn_see_solutions: "查看解决方案",
    btn_official_site: "官网",

    cta_badge: "让城市“动”起来的智能",
    cta_final_title: "不止于技术——我们共建安全、人本、高效的城市。",
    cta_final_contact: "联系 Synalis",
    cta_final_learn: "了解更多",

    footer_text:
      "不止是技术。我们打造驱动城市的智能，重塑城市生活，迈向更互联、更可持续的未来。",
    footer_rights: "© 2025 Synalis — 科技与创新。保留所有权利。",

    wa_prefill: "你好！我看到了你们的网站，想洽谈合作。可以聊一聊吗？",
    html_lang: "zh-CN",
  },
};

function applyTranslations(lang) {
  const dict = TRANSLATIONS[lang] || TRANSLATIONS.pt;
  document.title = dict.meta_title || document.title;
  document.documentElement.lang = dict.html_lang || lang;

  // Text nodes
  document.querySelectorAll("[data-i18n]").forEach((el) => {
    const key = el.getAttribute("data-i18n");
    if (dict[key]) el.textContent = dict[key];
  });

  // Attribute translations
  document.querySelectorAll("[data-i18n-attr]").forEach((el) => {
    const pairs = el
      .getAttribute("data-i18n-attr")
      .split(";")
      .map((s) => s.trim())
      .filter(Boolean);
    pairs.forEach((pair) => {
      const [attr, key] = pair.split("=").map((s) => s.trim());
      if (attr && key && dict[key]) el.setAttribute(attr, dict[key]);
    });
  });

  // Update WhatsApp prefill texts
  const msg = encodeURIComponent(dict.wa_prefill || "");
  const waMain = document.getElementById("whatsapp-main");
  const waFloat = document.getElementById("whatsapp-float");
  const base = "https://wa.me/5551994721625?text=" + msg;
  if (waMain) waMain.href = base;
  if (waFloat) waFloat.href = base;

  // Persist
  try {
    localStorage.setItem("synalis_lang", lang);
  } catch (e) {}
}

// Init icons and animations, then i18n
document.addEventListener("DOMContentLoaded", function () {
  if (window.lucide && lucide.createIcons) {
    lucide.createIcons({ attrs: { "stroke-width": 1.5 } });
  }

  const prefersReduced = window.matchMedia(
    "(prefers-reduced-motion: reduce)"
  ).matches;
  const targets = document.querySelectorAll("[data-animate]");

  if (prefersReduced) {
    targets.forEach((el) => el.classList.add("opacity-100"));
  } else {
    const io = new IntersectionObserver(
      (entries, obs) => {
        entries.forEach((entry) => {
          if (entry.isIntersecting) {
            const el = entry.target;
            const delay = el.dataset.delay
              ? parseInt(el.dataset.delay, 10)
              : 0;
            if (delay) el.style.animationDelay = delay + "ms";
            el.classList.add("animate-fade-in-up", "opacity-100");
            el.classList.remove("opacity-0", "translate-y-6");
            obs.unobserve(el);
          }
        });
      },
      { threshold: 0.15, rootMargin: "0px 0px -10% 0px" }
    );

    targets.forEach((el) => {
      el.classList.add("opacity-0", "translate-y-6", "will-change-transform");
      io.observe(el);
    });
  }

  // Language persistence and handlers
  const stored = (() => {
    try {
      return localStorage.getItem("synalis_lang");
    } catch (e) {
      return null;
    }
  })();
  const initial =
    stored || (document.documentElement.lang.startsWith("pt") ? "pt" : "pt");
  applyTranslations(initial);

  document.querySelectorAll("button[data-lang]").forEach((btn) => {
    btn.addEventListener("click", () => {
      const lang = btn.getAttribute("data-lang");
      applyTranslations(lang);
      // Close mobile menu after selecting language (if open)
      const mobileMenu = document.getElementById("mobile-menu");
      const menuBtn = document.getElementById("mobile-menu-btn");
      if (mobileMenu && menuBtn && !mobileMenu.classList.contains("hidden")) {
        mobileMenu.classList.add("hidden");
        menuBtn.setAttribute("aria-expanded", "false");
      }
    });
  });

  // Mobile menu toggle
  const menuBtn = document.getElementById("mobile-menu-btn");
  const mobileMenu = document.getElementById("mobile-menu");
  if (menuBtn && mobileMenu) {
    menuBtn.addEventListener("click", () => {
      mobileMenu.classList.toggle("hidden");
      const isOpen = !mobileMenu.classList.contains("hidden");
      menuBtn.setAttribute("aria-expanded", isOpen ? "true" : "false");
    });

    // Close on nav click
    document.querySelectorAll("#mobile-menu a[data-mobile-nav]").forEach((a) => {
      a.addEventListener("click", () => {
        mobileMenu.classList.add("hidden");
        menuBtn.setAttribute("aria-expanded", "false");
      });
    });

    // Close on Escape
    document.addEventListener("keydown", (e) => {
      if (e.key === "Escape" && !mobileMenu.classList.contains("hidden")) {
        mobileMenu.classList.add("hidden");
        menuBtn.setAttribute("aria-expanded", "false");
      }
    });
  }

  // Hero background crossfade (3 imagens)
  const slides = document.querySelectorAll(".hero-bg-slide");
  let idx = 0;
  if (slides.length > 0) {
    slides.forEach((img, i) => {
      img.style.opacity = i === 0 ? "1" : "0";
    });
    if (!prefersReduced) {
      setInterval(() => {
        const prev = idx;
        idx = (idx + 1) % slides.length;
        if (slides[prev]) slides[prev].style.opacity = "0";
        if (slides[idx]) slides[idx].style.opacity = "1";
      }, 7000);
    }
  }
});
